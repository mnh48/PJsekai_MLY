!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).oberonAmsterdamhorizontal=t()}}((function(){return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,(function(t){return i(e[s][1][t]||t)}),c,c.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){var r=Object.create||function(t){var e=function(){};return e.prototype=t,new e},i=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return n},o=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function s(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=r(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0;var a,u=10;try{var l={};Object.defineProperty&&Object.defineProperty(l,"x",{value:0}),a=0===l.x}catch(t){a=!1}function c(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,n){if(e)t.call(n);else for(var r=t.length,i=w(t,r),o=0;o<r;++o)i[o].call(n)}function p(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,o=w(t,i),s=0;s<i;++s)o[s].call(n,r)}function f(t,e,n,r,i){if(e)t.call(n,r,i);else for(var o=t.length,s=w(t,o),a=0;a<o;++a)s[a].call(n,r,i)}function d(t,e,n,r,i,o){if(e)t.call(n,r,i,o);else for(var s=t.length,a=w(t,s),u=0;u<s;++u)a[u].call(n,r,i,o)}function v(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,o=w(t,i),s=0;s<i;++s)o[s].apply(n,r)}function g(t,e,n,i){var o,s,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((s=t._events)?(s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),a=s[e]):(s=t._events=r(null),t._eventsCount=0),a){if("function"==typeof a?a=s[e]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),!a.warned&&(o=c(t))&&o>0&&a.length>o){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else a=s[e]=n,++t._eventsCount;return t}function m(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function y(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=o.call(m,r);return i.listener=n,r.wrapFn=i,i}function _(t,e,n){var r=t._events;if(!r)return[];var i=r[e];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):w(i,i.length):[]}function S(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function w(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}a?Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');u=t}}):s.defaultMaxListeners=u,s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(t){var e,n,r,i,o,s,a="error"===t;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var u=new Error('Unhandled "error" event. ('+e+")");throw u.context=e,u}if(!(n=s[t]))return!1;var l="function"==typeof n;switch(r=arguments.length){case 1:h(n,l,this);break;case 2:p(n,l,this,arguments[1]);break;case 3:f(n,l,this,arguments[1],arguments[2]);break;case 4:d(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];v(n,l,this,i)}return!0},s.prototype.addListener=function(t,e){return g(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return g(this,t,e,!0)},s.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,y(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,y(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,i,o,s,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=r(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){a=n[s].listener,o=s;break}if(o<0)return this;0===o?n.shift():function(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}(n,o),1===n.length&&(i[t]=n[0]),i.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.removeAllListeners=function(t){var e,n,o;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=r(null),this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=r(null):delete n[t]),this;if(0===arguments.length){var s,a=i(n);for(o=0;o<a.length;++o)"removeListener"!==(s=a[o])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=r(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)for(o=e.length-1;o>=0;o--)this.removeListener(t,e[o]);return this},s.prototype.listeners=function(t){return _(this,t,!0)},s.prototype.rawListeners=function(t){return _(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):S.call(t,e)},s.prototype.listenerCount=S,s.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],2:[function(t,e,n){var r,i,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var l,c=[],h=!1,p=-1;function f(){h&&l&&(h=!1,l.length?c=l.concat(c):p=-1,c.length&&d())}function d(){if(!h){var t=u(f);h=!0;for(var e=c.length;e;){for(l=c,c=[];++p<e;)l&&l[p].run();p=-1,e=c.length}l=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new v(t,e)),1!==c.length||h||u(d)},v.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],3:[function(t,e,n){(function(e,r){var i=t("process/browser.js").nextTick,o=Function.prototype.apply,s=Array.prototype.slice,a={},u=0;function l(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new l(o.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new l(o.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n.setImmediate="function"==typeof e?e:function(t){var e=u++,r=!(arguments.length<2)&&s.call(arguments,1);return a[e]=!0,i((function(){a[e]&&(r?t.apply(null,r):t.call(null),n.clearImmediate(e))})),e},n.clearImmediate="function"==typeof r?r:function(t){delete a[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":2,timers:3}],4:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(n,"__esModule",{value:!0});var s=t("events"),a=t("rebound"),u=100,l=10*u,c=function(t){function e(e){var n=void 0===e?{}:e,r=(n.scrollAmount,n.scrollAmountStep,n.container),i=void 0===r?document.documentElement:r,s=n.showScrollbars,c=void 0!==s&&s,h=n.preventVerticalScroll,p=void 0!==h&&h,f=t.call(this)||this;if(f.observer=null,f.containerIsIntersecting=!1,f.style=null,f.cssClass="__horizontal-container-"+Math.round(1e5*Math.random()),f.preventVerticalScroll=!1,f.blacklist=["input","select","textarea"],f.wheel=function(t){t.preventDefault();var e=Math.atan2(t.deltaY,t.deltaX)/Math.PI,n=!(e<.675&&e>-.375),r=Math.sqrt(Math.pow(t.deltaX,2)+Math.pow(t.deltaY,2));if(!f.preventVerticalScroll){switch(t.deltaMode){case WheelEvent.DOM_DELTA_LINE:r*=u;break;case WheelEvent.DOM_DELTA_PAGE:r*=l}n&&(r*=-1);var i=Math.max(f.container.scrollLeft+r,0);i<f.container.scrollWidth-f.container.clientWidth&&(t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?f.spring.setCurrentValue(i):f.spring.setEndValue(i))}},f.keydown=function(t){if(!f.observer||f.containerIsIntersecting){var e=t.target;if(!e||e===document.body||!f.blacklist.includes(e.nodeName.toLowerCase())){var n=f.container.scrollLeft,r=f.container.scrollWidth-f.container.clientWidth,i=!0;switch(t.code){case"Home":n=0;break;case"End":n=r;break;case"ArrowUp":if(f.preventVerticalScroll){i=!0;break}n-=u;break;case"ArrowDown":if(f.preventVerticalScroll){i=!0;break}n+=u;break;case"ArrowLeft":n-=u;break;case"ArrowRight":n+=u;break;case"PageUp":n-=l;break;case"PageDown":case"Space":n+=l;break;default:i=!1}n=Math.max(n,0),(n=Math.min(n,r))!==f.spring.getEndValue()&&(i&&t.preventDefault(),f.spring&&(f.spring.isAtRest()&&f.spring.setCurrentValue(f.container.scrollLeft),f.spring.setEndValue(n)))}}},void 0===i)return f;if(f.preventVerticalScroll=p,f.container=i,f.container.addEventListener("wheel",f.wheel),document.addEventListener("keydown",f.keydown),f.container!==document.documentElement&&("IntersectionObserver"in window?(f.observer=new IntersectionObserver((function(t){var e=o(t,1)[0];f.containerIsIntersecting=e.isIntersecting})),f.observer.observe(f.container)):console.warn("[horizontal-scroll] WARN: IntersectionObserver not available, assuming key navigation is always applicable to your container.")),!c){f.container.classList.add(f.cssClass),f.style=document.createElement("style"),document.head.appendChild(f.style);var d=f.style.sheet;if(d){d.insertRule("\n                        ."+f.cssClass+" {\n                            overflow-y: hidden;\n                            overflow-x: auto;\n\n                            /* prevents unwanted gestures and bounce effects */\n                            overscroll-behavior: auto;\n\n                            /* vendor specific hacks to hide scrollbars */\n                            scrollbar-width: none;\n                            -ms-overflow-style: none;\n                        }\n                    ");var v="::-webkit-scrollbar { display: none; }";f.container!==document.documentElement&&(v="."+f.cssClass+v),d.insertRule(v)}}return f.springSystem=new a.SpringSystem,f.spring=f.springSystem.createSpring(),f.spring.setCurrentValue(f.container.scrollLeft),f.spring.setOvershootClampingEnabled(!0),f.spring.addListener({onSpringUpdate:function(t){var e=t.getCurrentValue();f.emit("scroll",e),f.container.style.overscrollBehaviorY="none",f.container.style.overscrollBehaviorX=e>0?"none":"auto",f.container.scrollLeft=e}}),f.spring.notifyPositionUpdated(),f}return i(e,t),e.prototype.destroy=function(){void 0!==this.container&&(this.container.removeEventListener("wheel",this.wheel),document.removeEventListener("keydown",this.keydown),this.style&&this.style.remove(),this.container.classList.remove(this.cssClass),this.spring.destroy(),this.springSystem.removeAllListeners(),this.observer&&this.observer.disconnect())},e}(s.EventEmitter);n.default=c},{events:1,rebound:5}],5:[function(t,e,n){(function(t,r){!function(t,r){"object"==typeof n&&void 0!==e?e.exports=r():t.rebound=r()}(this,(function(){"use strict";var e=void 0;"undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),e||void 0===t||"node"!==t.title||(e=r);var n=e=e||function(t){window.setTimeout(t,1e3/60)},i=Array.prototype.concat,o=Array.prototype.slice;function s(t){return n(t)}function a(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}var u={};function l(t){if(u[t])return u[t];var e=t.replace("#","");3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var n=e.match(/.{2}/g);if(!n||n.length<3)throw new Error("Expected a color string of format #rrggbb");var r={r:parseInt(n[0],16),g:parseInt(n[1],16),b:parseInt(n[2],16)};return u[t]=r,r}function c(t,e,n){var r=t.toString(16),i=e.toString(16),o=n.toString(16);return"#"+(r=r.length<2?"0"+r:r)+(i=i.length<2?"0"+i:i)+(o=o.length<2?"0"+o:o)}var h=Object.freeze({bind:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];return function(){for(var n=arguments.length,s=Array(n),a=0;a<n;a++)s[a]=arguments[a];t.apply(e,i.call(r,o.call(s)))}},extend:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},onFrame:s,removeFirst:a,hexToRGB:l,rgbToHex:c});function p(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}var f=Object.freeze({mapValueInRange:p,interpolateColor:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments[5],s=l(e),a=l(n),u=Math.floor(p(t,r,i,s.r,a.r)),h=Math.floor(p(t,r,i,s.g,a.g)),f=Math.floor(p(t,r,i,s.b,a.b));return o?"rgb("+u+","+h+","+f+")":c(u,h,f)},degreesToRadians:function(t){return t*Math.PI/180},radiansToDegrees:function(t){return 180*t/Math.PI}});function d(t){return 3.62*(t-30)+194}function v(t){return 3*(t-8)+25}var g=Object.freeze({tensionFromOrigamiValue:d,origamiValueFromTension:function(t){return(t-194)/3.62+30},frictionFromOrigamiValue:v,origamiFromFriction:function(t){return(t-25)/3+8}}),m=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_=function(){function t(){m(this,t),this.springSystem=null}return t.prototype.run=function(){var t=b.call(this);s((function(){t.loop(Date.now())}))},t}(),S=function(){function t(e){m(this,t),this.springSystem=null,this.time=0,this.running=!1,this.timestep=e||16.667}return t.prototype.run=function(){var t=b.call(this);if(!this.running){for(this.running=!0;!t.getIsIdle();)t.loop(this.time+=this.timestep);this.running=!1}},t}(),w=function(){function t(){m(this,t),this.springSystem=null,this.time=0,this.running=!1}return t.prototype.run=function(){},t.prototype.step=function(t){b.call(this).loop(this.time+=t)},t}();function b(){if(null==this.springSystem)throw new Error("cannot run looper without a springSystem");return this.springSystem}var E=Object.freeze({AnimationLooper:_,SimulationLooper:S,SteppingSimulationLooper:w}),T=function(){function t(e,n){m(this,t),this.bounciness=e,this.speed=n;var r=this.normalize(e/1.7,0,20);r=this.projectNormal(r,0,.8);var i=this.normalize(n/1.7,0,20);this.bouncyTension=this.projectNormal(i,.5,200),this.bouncyFriction=this.quadraticOutInterpolation(r,this.b3Nobounce(this.bouncyTension),.01)}return t.prototype.normalize=function(t,e,n){return(t-e)/(n-e)},t.prototype.projectNormal=function(t,e,n){return e+t*(n-e)},t.prototype.linearInterpolation=function(t,e,n){return t*n+(1-t)*e},t.prototype.quadraticOutInterpolation=function(t,e,n){return this.linearInterpolation(2*t-t*t,e,n)},t.prototype.b3Friction1=function(t){return 7e-4*Math.pow(t,3)-.031*Math.pow(t,2)+.64*t+1.28},t.prototype.b3Friction2=function(t){return 44e-6*Math.pow(t,3)-.006*Math.pow(t,2)+.36*t+2},t.prototype.b3Friction3=function(t){return 45e-8*Math.pow(t,3)-332e-6*Math.pow(t,2)+.1078*t+5.84},t.prototype.b3Nobounce=function(t){return t<=18?this.b3Friction1(t):t>18&&t<=44?this.b3Friction2(t):this.b3Friction3(t)},t}(),I=function(){function t(e,n){m(this,t),this.tension=e,this.friction=n}return(t.fromOrigamiTensionAndFriction=function(e,n){return new t(d(e),v(n))},t.fromBouncinessAndSpeed=function(e,n){var r=new T(e,n);return t.fromOrigamiTensionAndFriction(r.bouncyTension,r.bouncyFriction)},t.coastingConfigWithOrigamiFriction=function(e){return new t(0,v(e))},t)}();I.DEFAULT_ORIGAMI_SPRING_CONFIG=I.fromOrigamiTensionAndFriction(40,7);var L=function t(){m(this,t),this.position=0,this.velocity=0},A=function(){function t(e){m(this,t),this.listeners=[],this._startValue=0,this._currentState=new L,this._displacementFromRestThreshold=.001,this._endValue=0,this._overshootClampingEnabled=!1,this._previousState=new L,this._restSpeedThreshold=.001,this._tempState=new L,this._timeAccumulator=0,this._wasAtRest=!0,this._id="s"+t._ID++,this._springSystem=e}return t.prototype.destroy=function(){this.listeners=[],this._springSystem.deregisterSpring(this)},t.prototype.getId=function(){return this._id},t.prototype.setSpringConfig=function(t){return this._springConfig=t,this},t.prototype.getSpringConfig=function(){return this._springConfig},t.prototype.setCurrentValue=function(t,e){return this._startValue=t,this._currentState.position=t,e||this.setAtRest(),this.notifyPositionUpdated(!1,!1),this},t.prototype.getStartValue=function(){return this._startValue},t.prototype.getCurrentValue=function(){return this._currentState.position},t.prototype.getCurrentDisplacementDistance=function(){return this.getDisplacementDistanceForState(this._currentState)},t.prototype.getDisplacementDistanceForState=function(t){return Math.abs(this._endValue-t.position)},t.prototype.setEndValue=function(t){if(this._endValue===t&&this.isAtRest())return this;this._startValue=this.getCurrentValue(),this._endValue=t,this._springSystem.activateSpring(this.getId());for(var e=0,n=this.listeners.length;e<n;e++){var r=this.listeners[e].onSpringEndStateChange;r&&r(this)}return this},t.prototype.getEndValue=function(){return this._endValue},t.prototype.setVelocity=function(t){return t===this._currentState.velocity?this:(this._currentState.velocity=t,this._springSystem.activateSpring(this.getId()),this)},t.prototype.getVelocity=function(){return this._currentState.velocity},t.prototype.setRestSpeedThreshold=function(t){return this._restSpeedThreshold=t,this},t.prototype.getRestSpeedThreshold=function(){return this._restSpeedThreshold},t.prototype.setRestDisplacementThreshold=function(t){this._displacementFromRestThreshold=t},t.prototype.getRestDisplacementThreshold=function(){return this._displacementFromRestThreshold},t.prototype.setOvershootClampingEnabled=function(t){return this._overshootClampingEnabled=t,this},t.prototype.isOvershootClampingEnabled=function(){return this._overshootClampingEnabled},t.prototype.isOvershooting=function(){var t=this._startValue,e=this._endValue;return this._springConfig.tension>0&&(t<e&&this.getCurrentValue()>e||t>e&&this.getCurrentValue()<e)},t.prototype.advance=function(e,n){var r=this.isAtRest();if(!r||!this._wasAtRest){var i=n;n>t.MAX_DELTA_TIME_SEC&&(i=t.MAX_DELTA_TIME_SEC),this._timeAccumulator+=i;for(var o=this._springConfig.tension,s=this._springConfig.friction,a=this._currentState.position,u=this._currentState.velocity,l=this._tempState.position,c=this._tempState.velocity,h=void 0,p=void 0,f=void 0,d=void 0,v=void 0,g=void 0,m=void 0,y=void 0;this._timeAccumulator>=t.SOLVER_TIMESTEP_SEC;)this._timeAccumulator-=t.SOLVER_TIMESTEP_SEC,this._timeAccumulator<t.SOLVER_TIMESTEP_SEC&&(this._previousState.position=a,this._previousState.velocity=u),h=u,p=o*(this._endValue-l)-s*u,l=a+h*t.SOLVER_TIMESTEP_SEC*.5,f=c=u+p*t.SOLVER_TIMESTEP_SEC*.5,d=o*(this._endValue-l)-s*c,l=a+f*t.SOLVER_TIMESTEP_SEC*.5,v=c=u+d*t.SOLVER_TIMESTEP_SEC*.5,g=o*(this._endValue-l)-s*c,l=a+v*t.SOLVER_TIMESTEP_SEC,m=c=u+g*t.SOLVER_TIMESTEP_SEC,y=1/6*(p+2*(d+g)+(o*(this._endValue-l)-s*c)),a+=1/6*(h+2*(f+v)+m)*t.SOLVER_TIMESTEP_SEC,u+=y*t.SOLVER_TIMESTEP_SEC;this._tempState.position=l,this._tempState.velocity=c,this._currentState.position=a,this._currentState.velocity=u,this._timeAccumulator>0&&this._interpolate(this._timeAccumulator/t.SOLVER_TIMESTEP_SEC),(this.isAtRest()||this._overshootClampingEnabled&&this.isOvershooting())&&(this._springConfig.tension>0?(this._startValue=this._endValue,this._currentState.position=this._endValue):(this._endValue=this._currentState.position,this._startValue=this._endValue),this.setVelocity(0),r=!0);var _=!1;this._wasAtRest&&(this._wasAtRest=!1,_=!0);var S=!1;r&&(this._wasAtRest=!0,S=!0),this.notifyPositionUpdated(_,S)}},t.prototype.notifyPositionUpdated=function(t,e){for(var n=0,r=this.listeners.length;n<r;n++){var i=this.listeners[n];t&&i.onSpringActivate&&i.onSpringActivate(this),i.onSpringUpdate&&i.onSpringUpdate(this),e&&i.onSpringAtRest&&i.onSpringAtRest(this)}},t.prototype.systemShouldAdvance=function(){return!this.isAtRest()||!this.wasAtRest()},t.prototype.wasAtRest=function(){return this._wasAtRest},t.prototype.isAtRest=function(){return Math.abs(this._currentState.velocity)<this._restSpeedThreshold&&(this.getDisplacementDistanceForState(this._currentState)<=this._displacementFromRestThreshold||0===this._springConfig.tension)},t.prototype.setAtRest=function(){return this._endValue=this._currentState.position,this._tempState.position=this._currentState.position,this._currentState.velocity=0,this},t.prototype._interpolate=function(t){this._currentState.position=this._currentState.position*t+this._previousState.position*(1-t),this._currentState.velocity=this._currentState.velocity*t+this._previousState.velocity*(1-t)},t.prototype.getListeners=function(){return this.listeners},t.prototype.addListener=function(t){return this.listeners.push(t),this},t.prototype.removeListener=function(t){return a(this.listeners,t),this},t.prototype.removeAllListeners=function(){return this.listeners=[],this},t.prototype.currentValueIsApproximately=function(t){return Math.abs(this.getCurrentValue()-t)<=this.getRestDisplacementThreshold()},t}();A._ID=0,A.MAX_DELTA_TIME_SEC=.064,A.SOLVER_TIMESTEP_SEC=.001;var C=function(){function t(e){m(this,t),this.listeners=[],this._activeSprings=[],this._idleSpringIndices=[],this._isIdle=!0,this._lastTimeMillis=-1,this._springRegistry={},this.looper=e||new _,this.looper.springSystem=this}return t.prototype.setLooper=function(t){this.looper=t,t.springSystem=this},t.prototype.createSpring=function(t,e){var n=void 0;return n=void 0===t||void 0===e?I.DEFAULT_ORIGAMI_SPRING_CONFIG:I.fromOrigamiTensionAndFriction(t,e),this.createSpringWithConfig(n)},t.prototype.createSpringWithBouncinessAndSpeed=function(t,e){var n=void 0;return n=void 0===t||void 0===e?I.DEFAULT_ORIGAMI_SPRING_CONFIG:I.fromBouncinessAndSpeed(t,e),this.createSpringWithConfig(n)},t.prototype.createSpringWithConfig=function(t){var e=new A(this);return this.registerSpring(e),e.setSpringConfig(t),e},t.prototype.getIsIdle=function(){return this._isIdle},t.prototype.getSpringById=function(t){return this._springRegistry[t]},t.prototype.getAllSprings=function(){var t=[];for(var e in this._springRegistry)this._springRegistry.hasOwnProperty(e)&&t.push(this._springRegistry[e]);return t},t.prototype.registerSpring=function(t){this._springRegistry[t.getId()]=t},t.prototype.deregisterSpring=function(t){a(this._activeSprings,t),delete this._springRegistry[t.getId()]},t.prototype.advance=function(t,e){for(;this._idleSpringIndices.length>0;)this._idleSpringIndices.pop();for(var n=0,r=this._activeSprings.length;n<r;n++){var i=this._activeSprings[n];i.systemShouldAdvance()?i.advance(t/1e3,e/1e3):this._idleSpringIndices.push(this._activeSprings.indexOf(i))}for(;this._idleSpringIndices.length>0;){var o=this._idleSpringIndices.pop();o>=0&&this._activeSprings.splice(o,1)}},t.prototype.loop=function(t){var e=void 0;-1===this._lastTimeMillis&&(this._lastTimeMillis=t-1);var n=t-this._lastTimeMillis;this._lastTimeMillis=t;var r=0,i=this.listeners.length;for(r=0;r<i;r++)(e=this.listeners[r]).onBeforeIntegrate&&e.onBeforeIntegrate(this);for(this.advance(t,n),0===this._activeSprings.length&&(this._isIdle=!0,this._lastTimeMillis=-1),r=0;r<i;r++)(e=this.listeners[r]).onAfterIntegrate&&e.onAfterIntegrate(this);this._isIdle||this.looper.run()},t.prototype.activateSpring=function(t){var e=this._springRegistry[t];-1===this._activeSprings.indexOf(e)&&this._activeSprings.push(e),this.getIsIdle()&&(this._isIdle=!1,this.looper.run())},t.prototype.addListener=function(t){this.listeners.push(t)},t.prototype.removeListener=function(t){a(this.listeners,t)},t.prototype.removeAllListeners=function(){this.listeners=[]},t}();return y({},E,{OrigamiValueConverter:g,MathUtil:f,Spring:A,SpringConfig:I,SpringSystem:C,util:y({},h,f)})}))}).call(this,t("_process"),t("timers").setImmediate)},{_process:2,timers:3}]},{},[4])(4)}));